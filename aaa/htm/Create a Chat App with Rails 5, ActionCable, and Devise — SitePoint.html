<!DOCTYPE html>
<!-- saved from url=(0080)https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/ -->
<html class="sp🚧  js no-ie8compat svg csspositionsticky inlinesvg svgclippaths" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/ptrack-v1.0.0.js.descarga"></script><script src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/sitepoint.com.descarga"></script>
    <link rel="manifest" href="https://www.sitepoint.com/manifest.json">
    <link href="https://dab1nmslvvntp.cloudfront.net/" ref="dns-prefetch">
    <link href="https://d2sis3lil8ndrq.cloudfront.net/" ref="dns-prefetch">
    <link href="https://sitepoint.com/" ref="dns-prefetch">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:image" content="https://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/icon.ruby.png">
        
    <link rel="shortcut icon" href="https://www.sitepoint.com/favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="https://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.sitepoint.com/wp-content/themes/sitepoint/assets/images/apple-touch-icon-144x144-precomposed.png">

    <!-- Sitepoint's new font from Google Fonts -->
    <link href="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/font-awesome.min.css">

    <link rel="alternate" type="application/rss+xml" title="RSS Feed for SitePoint.com" href="https://www.sitepoint.com/feed/">

        <link href="https://plus.google.com/+sitepoint" rel="publisher">
        <meta property="twitter:account_id" content="15743570">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">

    
<script async="" id="demandbase_js_lib" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/IM2QfEma.min.js.descarga"></script><script async="" type="text/javascript" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/gpt.js.descarga"></script><script async="" type="text/javascript" src="https://ads.servebom.com/purchs2s.js"></script><script type="text/javascript">
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;

  ga('create', 'UA-30131-1', '.sitepoint.com');

  ga('set', 'dimension2', 'ruby');

  ga('require', 'eventTracker', {
    attributePrefix: "data-ga-",
    events: ["click", "submit"]
  });
  ga('require', 'impressionTracker', {
    attributePrefix: "data-ga-",
    elements: [],
    fieldsObj: {
      eventCategory: "maestro",
    }
  });
  ga('require', 'outboundLinkTracker');
  ga('require', 'SitePointPlugin');

  ga('send', 'pageview');

  // Cross Domain Tracking to Learnable
  ga('require', 'linker');
  // command, domains, useAnchor, enableForms
  ga('linker:autoLink', ['learnable.com'], false, true);

  (function() {
		var ga = window[window['GoogleAnalyticsObject'] || 'ga'];

		var providePlugin = function(pluginName, pluginConstructor) {
			if (ga) {
				ga('provide', pluginName, pluginConstructor);
			}
		};

		var SitePointPlugin = function(tracker) {
			this.impressionObservables = [];
			this.hasIntersectionObserverLoaded = false;
			this.tracker = tracker;
			var originalSendHitTask = this.tracker.get('sendHitTask');
			this.tracker.set('sendHitTask', function(model) {
				originalSendHitTask(model);

        
				if (model.get('eventCategory') !== 'Demandbase') return;
				window.SP_OnDemandBaseReady && window.SP_OnDemandBaseReady(model);
			});
		};

    SitePointPlugin.prototype.observeImpressions = function(el) {
      if (el) this.impressionObservables = this.impressionObservables.concat(el);

      if (this.hasIntersectionObserverLoaded && this.impressionObservables.length) {
		    var ga = window[window['GoogleAnalyticsObject'] || 'ga'];
        ga('impressionTracker:observeElements', this.impressionObservables);
        this.impressionObservables = [];
      }
    }

    SitePointPlugin.prototype.intersectionObserverLoaded = function() {
      this.hasIntersectionObserverLoaded = true;
      this.observeImpressions();
    }

		providePlugin('SitePointPlugin', SitePointPlugin);
	})();
</script>
<script async="" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/analytics.js.descarga"></script>
<meta name="google-site-verification" content="hcQq0cWX73AYby8aMMzNHx8bZrTDI75GWeljGdPmNf8">
<meta name="google-site-verification" content="I0jyQlTvZaveab8RtDOjUxSPZXbdSgFrcKdAwaCCfvA">
<script src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/polyfill.min.js.descarga" async="" defer="" onload="ga(&#39;SitePointPlugin:intersectionObserverLoaded&#39;)"></script>
    <script class="SP_stripMobile" type="text/javascript">
      var purchs2s = purchs2s||{};
      purchs2s.cmd = purchs2s.cmd || [];
      purchs2s.timeout=500;
      (function() {
        var ps2s = document.createElement('script');
        ps2s.async = true;
        ps2s.type = 'text/javascript';
        var useSSL = 'https:' == document.location.protocol;
        ps2s.src = (useSSL ? 'https:' : 'http:') + '//ads.servebom.com/purchs2s.js';
        var node = document.getElementsByTagName('script')[0];
        node.parentNode.insertBefore(ps2s, node);
      })();
    </script>
    <script class="SP_stripMobile" type="text/javascript">
      var googletag = googletag || {};
      googletag.cmd = googletag.cmd || [];
      (function() {
      var gads = document.createElement('script');
      gads.async = true;
      gads.type = 'text/javascript';
      var useSSL = 'https:' == document.location.protocol;
      gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
      var node = document.getElementsByTagName('script')[0];
      node.parentNode.insertBefore(gads, node);
      })();
    </script>
    <script src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/OneSignalSDK.js.descarga" async=""></script>
    <script>
    var OneSignal = window.OneSignal || [];
    OneSignal.push(["init", {
      appId: "65189cfb-a985-4bd7-a41b-c2666081e811",
      safari_web_id: 'web.onesignal.auto.49d2239d-a04e-422a-89e0-14dbda97fb4d',
      autoRegister: true,
      persistNotification: true,
    }]);
  </script>
        
<!-- This site is optimized with the Yoast SEO plugin v5.1 - https://yoast.com/wordpress/plugins/seo/ -->
<title>Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint</title>
<meta name="description" content="Ilya Bodrov-Krukowski writes this very thorough tutorial on creating a chat application with Rails 5, ActionCable, and Devise. This goes through how to authorize users to that chat and protect your web sockets with Rails. Very cool!">
<link rel="canonical" href="https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/">
<link rel="publisher" href="https://plus.google.com/+sitepoint/">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint">
<meta property="og:description" content="Ilya Bodrov-Krukowski writes this very thorough tutorial on creating a chat application with Rails 5, ActionCable, and Devise. This goes through how to authorize users to that chat and protect your web sockets with Rails. Very cool!">
<meta property="og:url" content="https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/">
<meta property="og:site_name" content="SitePoint">
<meta property="article:publisher" content="https://www.facebook.com/sitepoint">
<meta property="article:author" content="https://facebook.com/isbodrov">
<meta property="article:tag" content="GlennG">
<meta property="article:tag" content="Ruby on Rails">
<meta property="article:section" content="Heroku">
<meta property="article:published_time" content="2016-06-16T07:00:38-07:00">
<meta property="article:modified_time" content="2017-06-19T16:55:14-07:00">
<meta property="og:updated_time" content="2017-06-19T16:55:14-07:00">
<meta property="fb:admins" content="121300382">
<meta property="og:image" content="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/06/14692657141466018138Fotolia_102360943_Subscription_Monthly_M-300x300.jpg">
<meta property="og:image:secure_url" content="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/06/14692657141466018138Fotolia_102360943_Subscription_Monthly_M-300x300.jpg">
<meta property="og:image:width" content="300">
<meta property="og:image:height" content="300">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="Ilya Bodrov-Krukowski writes this very thorough tutorial on creating a chat application with Rails 5, ActionCable, and Devise. This goes through how to authorize users to that chat and protect your web sockets with Rails. Very cool!">
<meta name="twitter:title" content="Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint">
<meta name="twitter:site" content="@sitepointdotcom">
<meta name="twitter:image" content="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/06/14692657141466018138Fotolia_102360943_Subscription_Monthly_M-300x300.jpg">
<meta name="twitter:creator" content="@bodrovis">
<!-- / Yoast SEO plugin. -->

<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="SitePoint » Create a Chat App with Rails 5, ActionCable, and Devise Comments Feed" href="https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.sitepoint.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.1"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/wp-emoji-release.min.js.descarga" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="sitepoint-styles-css" href="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/styles-63620ced6374adfdc078b1a126c2f666.css" type="text/css" media="all">
<link rel="stylesheet" id="sitepoint-styles-janus-css" href="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/compiled.cfa29c044cc4d12ef03f.css" type="text/css" media="all"><link rel="stylesheet" id="sitepoint-styles-janus-article-css" href="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/compiledArticle.198612b145321809d889.css" type="text/css" media="all">
<script type="text/javascript" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/scripts-head-42a85c5219e5c4b733340d9ea50d7a36.js.descarga"></script><script src="https://securepubads.g.doubleclick.net/gpt/pubads_impl_158.js" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-13/html/container.html"><link rel="prefetch" href="https://securepubads.g.doubleclick.net/static/3p_cookie.html">
<link rel="https://api.w.org/" href="https://www.sitepoint.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.sitepoint.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.sitepoint.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.8.1">
<link rel="shortlink" href="https://www.sitepoint.com/?p=133329">
<link rel="alternate" type="application/json+oembed" href="https://www.sitepoint.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.sitepoint.com%2Fcreate-a-chat-app-with-rails-5-actioncable-and-devise%2F">
<link rel="alternate" type="text/xml+oembed" href="https://www.sitepoint.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.sitepoint.com%2Fcreate-a-chat-app-with-rails-5-actioncable-and-devise%2F&amp;format=xml">
<script data-cfasync="false" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/saved_resource" data-sumo-platform="wordpress" data-sumo-site-id="64b8e500e3524000ecfa2000d01e2100033e83009398f000ab804c005e0e4300" async=""></script><!-- BEGIN wp-parsely Plugin Version 1.10.2 -->
<meta name="wp-parsely_version" id="wp-parsely_version" content="1.10.2">
   <script type="application/ld+json">
   {"@context":"http:\/\/schema.org","@type":"NewsArticle","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/www.sitepoint.com\/create-a-chat-app-with-rails-5-actioncable-and-devise\/"},"headline":"Create a Chat App with Rails 5, ActionCable, and Devise","url":"http:\/\/www.sitepoint.com\/create-a-chat-app-with-rails-5-actioncable-and-devise\/","thumbnailUrl":"https:\/\/www.sitepoint.com\/wp-content\/uploads\/2016\/06\/14692657141466018138Fotolia_102360943_Subscription_Monthly_M-300x300-150x150.jpg","image":{"@type":"ImageObject","url":"https:\/\/www.sitepoint.com\/wp-content\/uploads\/2016\/06\/14692657141466018138Fotolia_102360943_Subscription_Monthly_M-300x300-150x150.jpg"},"dateCreated":"2016-06-16T14:00:38Z","datePublished":"2016-06-16T14:00:38Z","dateModified":"2004-02-02T01:34:47Z","articleSection":"Ruby","author":[{"@type":"Person","name":"Ilya Bodrov-Krukowski"}],"creator":["Ilya Bodrov-Krukowski"],"publisher":{"@type":"Organization","name":"SitePoint"},"keywords":["glenng","ruby on rails"]}   </script>
    <!-- END wp-parsely Plugin Version 1.10.2 -->
    <script type="text/javascript">
      googletag.cmd.push(function() {
        purchs2s.cmd.push(function() {
          		googletag.defineSlot("/7448792/SP2013_Articles_300x250_1", [300,250], "div-gpt-ad-1392428092543-0").defineSizeMapping(purchs2s.sizeMapping("div-gpt-ad-1392428092543-0").addSize([0, 0], []).addSize([768, 0], [300,250]).addSize([1024, 0], [300,250]).build()).addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP2013_Articles_300x600_1", [[300, 600], [300, 250], [160, 600]], "div-gpt-ad-1392428092543-4").defineSizeMapping(purchs2s.sizeMapping("div-gpt-ad-1392428092543-4").addSize([0, 0], []).addSize([768, 0], [[300, 600], [300, 250], [160, 600]]).addSize([1024, 0], [[300, 600], [300, 250], [160, 600]]).build()).addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP_Articles_200x125_1", [200,125], "div-gpt-ad-1436815711585-0").defineSizeMapping(purchs2s.sizeMapping("div-gpt-ad-1436815711585-0").addSize([0, 0], []).addSize([768, 0], [200,125]).addSize([1024, 0], [200,125]).build()).addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP_Articles_200x125_2", [200,125], "div-gpt-ad-1436815711585-1").defineSizeMapping(purchs2s.sizeMapping("div-gpt-ad-1436815711585-1").addSize([0, 0], []).addSize([768, 0], [200,125]).addSize([1024, 0], [200,125]).build()).addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP_Articles_200x125_3", [200,125], "div-gpt-ad-1436815711585-2").defineSizeMapping(purchs2s.sizeMapping("div-gpt-ad-1436815711585-2").addSize([0, 0], []).addSize([768, 0], [200,125]).addSize([1024, 0], [200,125]).build()).addService(googletag.pubads());
		googletag.defineSlot("/7448792/SP_Articles_200x125_4", [200,125], "div-gpt-ad-1436815711585-3").defineSizeMapping(purchs2s.sizeMapping("div-gpt-ad-1436815711585-3").addSize([0, 0], []).addSize([768, 0], [200,125]).addSize([1024, 0], [200,125]).build()).addService(googletag.pubads());
		googletag.pubads().setTargeting("channel", "ruby");
		googletag.pubads().setTargeting("post_id", "133329");
		googletag.pubads().setTargeting("AOL",["true", "false"]);
		googletag.pubads().setTargeting("OpenX",["true", "false"]);
		googletag.pubads().setTargeting("Tribal",["true", "false"]);
		googletag.pubads().enableSingleRequest();
          googletag.pubads().setTargeting("tags", ["GlennG","Ruby on Rails"]);
          googletag.pubads().collapseEmptyDivs();
          googletag.pubads().disableInitialLoad();
          googletag.enableServices();
          purchs2s.setup();
        });
      });
      SP_GPT_Slots = [];
    </script>
    <!--[if lt IE 9]>
      <script src="/wp-content/themes/sitepoint/assets/javascripts/vendor/respond.custom.min.js"></script>
    <![endif]-->
    <style>
  .t-color { color: #EB5745 }
  a.t-color:hover,
  button.t-color:hover { color: #B84435 }

  .t-bg { background-color: #EB5745 }
  a.t-bg:hover,
  button.t-bg:hover { background-color: #B84435}

  .t-border { border-color: #EB5745 }
  a.t-border:hover,
  button.t-border:hover { border-color: #B84435 }

  .t-bg-dark { background-color: #B84435 }

  .t-list li:before { background-color: #EB5745; }

  .t-p-pop-bg { background-color: #1a9b9e }
  a.t-p-pop-bg:hover,
  button.t-p-pop-bg:hover { background-color: #018285}
</style>
  <script async="" type="text/javascript" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/count.js.descarga"></script><style type="text/css"></style><script type="text/javascript" charset="utf-8" async="" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/Prism.73740c5562b3c7e70566.js.descarga"></script><script async="true" type="text/javascript" src="https://s.adroll.com/j/roundtrip.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="a25489e9-848c-4356-97ff-161b0852c509/service" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/service.js.descarga"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="156085c5-0017-4150-b225-a731ad248f38/service" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/service.js(1).descarga"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="2c40add5-3570-45d7-8212-8fc2942f7f74/service" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/service.js(2).descarga"></script><link type="text/css" rel="stylesheet" href="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/listbuilder-popup.css"></head>
  <body style="">
    <header class="main-header u-isSingle" role="banner">
      <nav class=" NavBar l-p-fix l-p-sta--3col l-d-f l-w-100 t-bg-grey-500">
        <div class="l-d-f l-w-100 l-w-3col--3col l-w-4col--4col l-jc-sb l-mh-auto l-ph2">
          <section class="l-d-f l-ai-str l-jc-sta">
            <a tabindex="0" class="l-d-f l-ai-cen l-pa3 f-c-white t-t NavBar_item" onclick="sitepoint.SidebarNav_toggle(event)" onkeyup="sitepoint.SidebarNav_toggle(event)">
              <i class="f-medium fa fa-navicon"></i>
            </a>
            
<div id="SidebarNav" class="SidebarNav" onkeyup="sitepoint.SidebarNav_toggle(event)">
  <header class="m-border-b SidebarNav_header">
    <a href="https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/#" onclick="sitepoint.SidebarNav_toggle(event)" class="l-pt0 f-light">
      <span class="SidebarNav_icon">×</span>
    </a>
    <div class="l-d-n l-d-b--3col SidebarNav_search">
      <form method="get" action="https://www.sitepoint.com/">
        <input aria-label="search" autocomplete="off" id="sidebar-search-box" name="s" placeholder="Search" type="text">
        <button><i class="fa fa-search"></i></button>
      </form>
    </div>
  </header>

  <section class="m-border-b">
    <ul>
      <li class="SidebarNav_link u-premium/l/monthly-membership/?ref_source=sitepoint&amp;ref_medium=drawer">
            <i class="SidebarNav_icon fa fa-user u-premium/l/monthly-membership/?ref_source=sitepoint&amp;ref_medium=drawer"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/premium/l/monthly-membership/?ref_source=sitepoint&amp;ref_medium=drawer?ref_source=sitepoint&amp;ref_medium=drawer">Sign Up</a>
          </li>      <li class="SidebarNav_link u-premium/sign-in">
            <i class="SidebarNav_icon fa fa-sign-in u-premium/sign-in"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/premium/sign-in/?ref_source=sitepoint&amp;ref_medium=drawer">Login</a>
          </li>                </ul>
  </section>

  <section class="m-border-b SidebarNav_products">
    <ul>
              <li class="SidebarNav_link u-premium/deals/?ref_source=sitepoint&amp;ref_medium=drawer">
            <i class="SidebarNav_icon fa fa-diamond u-premium/deals/?ref_source=sitepoint&amp;ref_medium=drawer"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/premium/deals/?ref_source=sitepoint&amp;ref_medium=drawer?ref_source=sitepoint&amp;ref_medium=drawer">Deals</a>
          </li>            <li class="SidebarNav_link u-premium/books">
            <i class="SidebarNav_icon fa fa-book u-premium/books"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/premium/books/?ref_source=sitepoint&amp;ref_medium=drawer">Books</a>
          </li>      <li class="SidebarNav_link u-premium/courses">
            <i class="SidebarNav_icon fa fa-play-circle u-premium/courses"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/premium/courses/?ref_source=sitepoint&amp;ref_medium=drawer">Courses</a>
          </li>      <li class="SidebarNav_link u-premium/paths">
            <i class="SidebarNav_icon fa fa-map-marker u-premium/paths"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/premium/paths/?ref_source=sitepoint&amp;ref_medium=drawer">Paths</a>
          </li>    </ul>
  </section>

  <section class="m-border-b SidebarNav_topics">
    <ul>
      <li class="SidebarNav_link SidebarNav_channelLink u-html-css">
            <i class="SidebarNav_icon fa fa-circle u-html-css"></i>
            <a class="f-light" href="https://www.sitepoint.com/html-css/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="html-css">HTML &amp; CSS</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-javascript">
            <i class="SidebarNav_icon fa fa-circle u-javascript"></i>
            <a class="f-light" href="https://www.sitepoint.com/javascript/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="javascript">JavaScript</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-php">
            <i class="SidebarNav_icon fa fa-circle u-php"></i>
            <a class="f-light" href="https://www.sitepoint.com/php/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="php">PHP</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-design-ux">
            <i class="SidebarNav_icon fa fa-circle u-design-ux"></i>
            <a class="f-light" href="https://www.sitepoint.com/design-ux/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="design-ux">Design &amp; UX</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-web">
            <i class="SidebarNav_icon fa fa-circle u-web"></i>
            <a class="f-light" href="https://www.sitepoint.com/web/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="web">Web</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-wordpress">
            <i class="SidebarNav_icon fa fa-circle u-wordpress"></i>
            <a class="f-light" href="https://www.sitepoint.com/wordpress/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="wordpress">WordPress</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-woorank">
            <i class="SidebarNav_icon fa fa-circle u-woorank"></i>
            <a class="f-light" href="https://www.sitepoint.com/woorank/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="woorank">SEO By WooRank</a>
          </li>      <li class="SidebarNav_link SidebarNav_channelLink u-developer-center">
            <i class="SidebarNav_icon fa fa-circle u-developer-center"></i>
            <a class="f-light" href="https://www.sitepoint.com/developer-center/?ref_source=sitepoint&amp;ref_medium=drawer" data-channel="developer-center">Microsoft Tech</a>
          </li>    </ul>
  </section>

  <section class="m-border-b">
    <ul>
      <li class="SidebarNav_link u-community">
            <i class="SidebarNav_icon fa fa-comment u-community"></i>
            
            <a class="f-light" href="https://www.sitepoint.com/community/?ref_source=sitepoint&amp;ref_medium=drawer">Community</a>
          </li>      <li class="SidebarNav_link u-versioning">
            <i class="SidebarNav_icon fa fa-envelope u-versioning"></i>
            <i class="SidebarNav_icon"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->
<svg viewBox="0 0 463 533">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Misc-Icons" transform="translate(-224.000000, -209.000000)" fill="#A2A2A2">
            <g id="Adam" transform="translate(224.000000, 209.000000)">
                <path d="M205.23914,223.989305 C205.23914,239.058221 193.018305,251.270053 177.938282,251.270053 C162.858259,251.270053 150.637425,239.064975 150.637425,223.989305 C150.637425,208.927144 162.858259,196.708557 177.938282,196.708557 C193.018305,196.708557 205.23914,208.927144 205.23914,223.989305" id="Shape"></path>
                <path d="M319.240023,223.989305 C319.240023,239.058221 307.019188,251.270053 291.939165,251.270053 C276.859142,251.270053 264.638308,239.064975 264.638308,223.989305 C264.638308,208.927144 276.859142,196.708557 291.939165,196.708557 C307.019188,196.708557 319.240023,208.927144 319.240023,223.989305" id="Shape-Copy"></path>
                <path d="M45.9192714,105.68948 C47.1603233,105.013767 48.4156135,104.338834 49.6814591,103.66477 C49.285517,101.268011 49.079511,98.8067359 49.079511,96.2970985 C49.079511,71.6393315 68.9663337,51.6502619 93.4979726,51.6502619 C104.828598,51.6502619 115.168338,55.9145566 123.11028,62.1553999 C123.11028,37.497633 142.997103,17.5085634 167.528742,17.5085634 C177.872808,17.5085634 187.39103,21.0626011 194.940698,27.0220906 C201.994758,11.1002236 217.874616,0 236.33381,0 C255.201408,0 271.374274,11.5968357 278.182101,28.0859033 C285.813075,16.4403992 298.937725,8.75428168 313.84838,8.75428168 C335.217866,8.75428168 352.918943,24.5413571 356.037389,45.1451696 C359.093922,44.2508863 362.326213,43.7714084 365.669919,43.7714084 C384.669913,43.7714084 400.072453,59.2531388 400.072453,78.3508211 C400.072453,84.451539 398.500668,90.1832596 395.741931,95.1591734 C420.545,106.093308 441.166028,118.313655 447.484806,130.438797 C462.05792,158.40324 448.921531,194.216875 441.795446,209.76377 C445.786047,226.227441 447.901492,243.429264 447.901492,261.127716 C447.901492,277.569319 446.075834,293.582324 442.617163,308.973095 C454.31826,313.102542 462.707645,324.30529 462.707645,337.477559 C462.707645,352.446546 451.87352,364.872078 437.657056,367.264056 C442.403415,372.604775 445.288641,379.652197 445.288641,387.376964 C445.288641,404.057219 431.83579,417.579236 415.240858,417.579236 C414.739425,417.579236 414.24086,417.56689 413.745449,417.542485 C416.086983,421.841984 417.418234,426.776628 417.418234,432.023801 C417.418234,448.704055 403.965383,462.226073 387.370451,462.226073 C385.766225,462.226073 384.191363,462.099709 382.655177,461.856345 C383.175775,464.083267 383.451175,466.405199 383.451175,468.791784 C383.451175,485.472038 369.998324,498.994056 353.403392,498.994056 C348.884389,498.994056 344.598385,497.991345 340.753583,496.195199 C340.156973,512.346957 326.941829,525.256901 310.726831,525.256901 C300.435078,525.256901 291.351821,520.056112 285.93648,512.126599 C281.811241,523.856499 270.681444,532.260326 257.598867,532.260326 C247.286985,532.260326 238.188331,527.039174 232.776786,519.083469 C227.365238,527.039175 218.266585,532.260326 207.954704,532.260326 C194.872127,532.260326 183.74233,523.856499 179.617091,512.126599 C174.20175,520.056112 165.118493,525.256901 154.82674,525.256901 C138.611742,525.256901 125.396598,512.346957 124.799988,496.195199 C120.955186,497.991345 116.669182,498.994056 112.150179,498.994056 C95.5552468,498.994056 82.1023962,485.472038 82.1023962,468.791784 C82.1023962,466.405199 82.3777956,464.083267 82.8983938,461.856345 C81.3622084,462.099709 79.7873457,462.226073 78.1831202,462.226073 C61.588188,462.226073 48.1353374,448.704055 48.1353374,432.023801 C48.1353374,426.776628 49.4665878,421.841984 51.8081225,417.542485 C51.312711,417.56689 50.8141464,417.579236 50.312713,417.579236 C33.7177807,417.579236 20.2649301,404.057219 20.2649301,387.376964 C20.2649301,379.652197 23.1501561,372.604775 27.8965152,367.264056 C13.6800506,364.872078 2.84592558,352.446546 2.84592558,337.477559 C2.84592558,324.30529 11.2353108,313.102542 22.9364075,308.973095 C19.4777374,293.582324 17.6520794,277.569319 17.6520794,261.127716 C17.6520794,244.483155 19.5230884,228.277837 23.0652378,212.71266 C23.0461555,212.67345 23.0269954,212.633634 23.0077587,212.593218 C8.40744355,199.915919 -22.2912349,139.477462 27.9975916,114.351569 C34.9803921,110.862741 40.9027514,108.009708 45.9192714,105.68948 L45.9192714,105.68948 Z M321.182928,338.855264 C312.257241,380.392075 275.494697,411.515802 231.5,411.515802 C187.505303,411.515802 150.742759,380.392075 141.817072,338.855264 L321.182928,338.855264 L321.182928,338.855264 L321.182928,338.855264 Z M323.401809,93.513343 C382.119911,125.539939 421.986958,188.049902 421.986958,259.919187 C421.986958,269.181179 421.324839,278.287729 420.045582,287.193626 L420.045582,287.193626 C414.531038,280.687855 406.320283,276.561781 397.150761,276.561781 C382.005642,276.561781 369.476084,287.817909 367.390774,302.461227 C361.921787,296.754612 354.241111,293.204376 345.735474,293.204376 C336.696537,293.204376 328.589254,297.213765 323.07789,303.559722 L323.07789,303.559722 C317.566526,297.213765 309.459243,293.204376 300.420306,293.204376 C291.140116,293.204376 282.841976,297.430646 277.326999,304.072813 C271.812023,297.430646 263.513882,293.204376 254.233693,293.204376 C245.884947,293.204376 238.331009,296.624848 232.883277,302.147652 L232.883277,302.147652 C227.435545,296.624848 219.881607,293.204376 211.532861,293.204376 C202.252672,293.204376 193.954531,297.430646 188.439555,304.072813 C182.924578,297.430646 174.626438,293.204376 165.346248,293.204376 C156.307311,293.204376 148.200028,297.213765 142.688664,303.559722 L142.688664,303.559722 C137.1773,297.213765 129.070017,293.204376 120.03108,293.204376 C111.525443,293.204376 103.844767,296.754612 98.3757799,302.461227 C96.2904699,287.817909 83.7609125,276.561781 68.6157934,276.561781 C60.2507056,276.561781 52.6835401,279.995657 47.2334107,285.537513 C46.105173,277.159748 45.5224867,268.607864 45.5224867,259.919187 C45.5224867,222.269089 56.4635528,187.187552 75.3242153,157.711582 C101.872077,155.792935 136.061257,148.07484 172.032022,134.915239 C218.909805,117.765397 257.559595,95.4909208 277.539381,75.8645287 C278.024685,75.9807367 278.50926,76.0988336 278.993099,76.2188112 C286.713596,87.3063559 299.514894,94.5568665 314.000977,94.5568665 C317.230893,94.5568665 320.377051,94.1964131 323.401809,93.513343 L323.401809,93.513343 L323.401809,93.513343 Z" id="Path"></path>
            </g>
        </g>
    </g>
</svg>
</i>
            <a class="f-light" href="https://www.sitepoint.com/versioning/?ref_source=sitepoint&amp;ref_medium=drawer">Versioning</a>
          </li>    </ul>
  </section>

  <section class="m-border-b SidebarNav_admin">
    <ul>
      <li class="SidebarNav_link u-advertise">
            
            
            <a class="f-light" href="https://www.sitepoint.com/advertise/?ref_source=sitepoint&amp;ref_medium=drawer">Advertise</a>
          </li>      <li class="SidebarNav_link u-contact-us">
            
            
            <a class="f-light" href="https://www.sitepoint.com/contact-us/?ref_source=sitepoint&amp;ref_medium=drawer">Contact Us</a>
          </li>      <zendesk><li class="SidebarNav_link"><a class="f-light" href="https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/#">Support</a></li></zendesk></ul>
  </section>

  
  <section class="SidebarNav_social">
    <ul>
      <li class="SidebarNav_socialLink">
        <a class="f-light" href="https://www.sitepoint.com/newsletter/">
          <i class="fa fa-envelope SidebarNav_socialIcon u-newsletter"></i>
          <span class="SidebarNav_socialCount">1.2M<br>Subscribers</span>
        </a>
      </li>
      <li class="SidebarNav_socialLink">
        <a class="f-light" href="https://twitter.com/sitepointdotcom" rel="noopener" target="_blank">
          <i class="fa fa-twitter SidebarNav_socialIcon u-twitter"></i>
          <span class="SidebarNav_socialCount">136k<br>Followers</span>
        </a>
      </li>
      <li class="SidebarNav_socialLink">
        <a class="f-light" href="https://facebook.com/sitepoint" rel="noopener" target="_blank">
          <i class="fa fa-facebook SidebarNav_socialIcon u-facebook"></i>
          <span class="SidebarNav_socialCount">100k<br>Followers</span>
        </a>
      </li>
    </ul>
  </section>
</div>

<div class="SidebarNav_lightbox" onclick="sitepoint.SidebarNav_toggle(event)"></div>
            <a class="l-d-f" href="https://www.sitepoint.com/">
              <div class="l-d-n l-d-f--3col l-as-cen">
                <svg class="sp-logo" viewBox="0 0 123 27">
  <g fill-rule="evenodd">
    <path d="M31.36,16.75 C31.56,17.07 31.82,17.31 32.14,17.50 C32.46,17.68 32.82,17.82 33.23,17.89 C33.63,17.97 34.05,18.01 34.48,18.01 C34.81,18.01 35.16,17.99 35.52,17.94 C35.89,17.89 36.22,17.81 36.53,17.68 C36.83,17.55 37.08,17.36 37.28,17.11 C37.48,16.87 37.58,16.55 37.58,16.17 C37.58,15.64 37.37,15.24 36.96,14.97 C36.55,14.69 36.03,14.47 35.41,14.31 C34.79,14.14 34.12,13.99 33.39,13.85 C32.66,13.71 31.99,13.52 31.37,13.27 C30.75,13.03 30.23,12.68 29.82,12.23 C29.41,11.78 29.20,11.16 29.20,10.36 C29.20,9.73 29.34,9.20 29.63,8.75 C29.92,8.30 30.30,7.94 30.75,7.66 C31.20,7.38 31.72,7.17 32.29,7.03 C32.86,6.90 33.42,6.83 33.99,6.83 C34.71,6.83 35.38,6.89 35.99,7.01 C36.61,7.13 37.15,7.34 37.62,7.63 C38.09,7.93 38.46,8.33 38.75,8.83 C39.03,9.34 39.19,9.96 39.24,10.72 L37.13,10.72 C37.10,10.32 36.99,9.98 36.81,9.72 C36.63,9.46 36.40,9.25 36.12,9.08 C35.84,8.92 35.53,8.81 35.19,8.74 C34.85,8.66 34.51,8.63 34.16,8.63 C33.84,8.63 33.53,8.65 33.20,8.70 C32.88,8.75 32.59,8.83 32.32,8.95 C32.06,9.07 31.84,9.23 31.68,9.43 C31.51,9.63 31.43,9.89 31.43,10.21 C31.43,10.56 31.56,10.86 31.82,11.09 C32.07,11.32 32.40,11.51 32.80,11.66 C33.19,11.82 33.64,11.95 34.13,12.05 C34.63,12.15 35.13,12.26 35.62,12.37 C36.15,12.49 36.67,12.62 37.17,12.78 C37.67,12.94 38.12,13.15 38.51,13.42 C38.90,13.68 39.21,14.01 39.45,14.41 C39.69,14.81 39.81,15.31 39.81,15.90 C39.81,16.66 39.65,17.28 39.33,17.77 C39.01,18.27 38.58,18.67 38.06,18.98 C37.54,19.28 36.96,19.49 36.30,19.61 C35.65,19.73 35.00,19.79 34.36,19.79 C33.65,19.79 32.97,19.72 32.32,19.58 C31.68,19.43 31.11,19.20 30.61,18.87 C30.12,18.54 29.72,18.11 29.42,17.57 C29.13,17.03 28.96,16.38 28.93,15.61 L31.03,15.61 C31.05,16.06 31.16,16.44 31.36,16.75" id="Fill-1"></path>
    <path d="M42.27,7.12 L44.37,7.12 L44.37,19.53 L42.27,19.53 L42.27,7.12 Z" id="Fill-2"></path>
    <path d="M53.13,7.12 L53.13,8.92 L50.57,8.92 L50.57,16.62 C50.57,16.86 50.59,17.05 50.63,17.20 C50.67,17.34 50.75,17.46 50.87,17.54 C50.99,17.62 51.15,17.67 51.35,17.69 C51.56,17.71 51.83,17.73 52.16,17.73 L53.13,17.73 L53.13,19.53 L51.51,19.53 C50.97,19.53 50.50,19.49 50.11,19.42 C49.72,19.35 49.41,19.22 49.17,19.02 C48.93,18.83 48.75,18.56 48.64,18.21 C48.52,17.86 48.46,17.39 48.46,16.81 L48.46,8.92 L46.28,8.92 L46.28,7.12 L48.46,7.12 L48.46,3.39 L50.57,3.39 L50.57,7.12 L53.13,7.12" id="Fill-3"></path>
    <path d="M64.53,18.73 C63.57,19.44 62.36,19.79 60.91,19.79 C59.89,19.79 59.00,19.63 58.25,19.31 C57.49,18.99 56.86,18.54 56.35,17.97 C55.84,17.39 55.45,16.70 55.20,15.90 C54.94,15.10 54.80,14.23 54.76,13.29 C54.76,12.34 54.91,11.48 55.21,10.69 C55.51,9.91 55.92,9.23 56.46,8.65 C57.00,8.08 57.63,7.63 58.37,7.31 C59.11,6.99 59.91,6.83 60.79,6.83 C61.93,6.83 62.87,7.05 63.63,7.51 C64.38,7.97 64.98,8.55 65.44,9.25 C65.89,9.96 66.20,10.73 66.38,11.56 C66.55,12.39 66.62,13.18 66.59,13.93 L56.99,13.93 C56.98,14.48 57.04,14.99 57.19,15.48 C57.34,15.97 57.58,16.40 57.91,16.78 C58.24,17.16 58.66,17.46 59.18,17.68 C59.69,17.90 60.29,18.01 60.98,18.01 C61.88,18.01 62.61,17.82 63.18,17.41 C63.75,17.02 64.13,16.41 64.31,15.59 L66.39,15.59 C66.11,16.98 65.49,18.03 64.53,18.73 L64.53,18.73 Z M64.02,10.76 C63.83,10.33 63.58,9.96 63.25,9.65 C62.93,9.34 62.55,9.09 62.11,8.90 C61.68,8.72 61.19,8.63 60.66,8.63 C60.12,8.63 59.62,8.72 59.19,8.90 C58.75,9.09 58.37,9.34 58.06,9.66 C57.75,9.98 57.50,10.35 57.32,10.78 C57.13,11.20 57.03,11.65 56.99,12.13 L64.36,12.13 C64.32,11.65 64.21,11.20 64.02,10.76 L64.02,10.76 Z" id="Fill-4"></path>
    <path d="M70.95,7.12 L70.95,8.80 L71.00,8.80 C71.35,8.11 71.89,7.61 72.64,7.30 C73.38,6.98 74.20,6.83 75.09,6.83 C76.09,6.83 76.95,7.00 77.68,7.36 C78.42,7.71 79.03,8.18 79.52,8.78 C80.01,9.38 80.37,10.08 80.62,10.86 C80.87,11.65 80.99,12.48 80.99,13.36 C80.99,14.24 80.87,15.07 80.63,15.85 C80.39,16.64 80.03,17.32 79.54,17.91 C79.06,18.49 78.44,18.95 77.71,19.29 C76.97,19.62 76.12,19.79 75.14,19.79 C74.83,19.79 74.48,19.76 74.09,19.70 C73.70,19.63 73.32,19.53 72.94,19.38 C72.56,19.24 72.20,19.04 71.86,18.79 C71.52,18.55 71.23,18.24 71.00,17.87 L70.95,17.87 L70.95,24.26 L68.84,24.26 L68.84,7.12 L70.95,7.12 L70.95,7.12 Z M78.53,11.52 C78.37,10.97 78.13,10.48 77.81,10.04 C77.49,9.61 77.07,9.27 76.57,9.01 C76.06,8.76 75.47,8.63 74.79,8.63 C74.08,8.63 73.48,8.76 72.98,9.04 C72.49,9.31 72.08,9.67 71.77,10.10 C71.46,10.55 71.23,11.05 71.09,11.60 C70.95,12.17 70.88,12.73 70.88,13.31 C70.88,13.92 70.95,14.51 71.10,15.07 C71.25,15.64 71.48,16.14 71.81,16.57 C72.13,17.01 72.55,17.35 73.06,17.62 C73.57,17.88 74.19,18.01 74.92,18.01 C75.65,18.01 76.25,17.88 76.74,17.61 C77.23,17.34 77.62,16.98 77.92,16.53 C78.22,16.08 78.43,15.57 78.56,14.99 C78.70,14.41 78.76,13.82 78.76,13.21 C78.76,12.64 78.68,12.07 78.53,11.52 L78.53,11.52 Z" id="Fill-5"></path>
    <path d="M83.17,10.78 C83.44,9.98 83.84,9.30 84.36,8.71 C84.89,8.13 85.55,7.67 86.33,7.33 C87.10,7.00 87.99,6.83 89.00,6.83 C90.03,6.83 90.92,7.00 91.69,7.33 C92.46,7.67 93.11,8.13 93.64,8.71 C94.17,9.30 94.56,9.98 94.83,10.78 C95.09,11.57 95.23,12.42 95.23,13.33 C95.23,14.25 95.09,15.09 94.83,15.88 C94.56,16.66 94.17,17.35 93.64,17.93 C93.11,18.52 92.46,18.97 91.69,19.30 C90.92,19.63 90.03,19.79 89.00,19.79 C87.99,19.79 87.10,19.63 86.33,19.30 C85.55,18.97 84.89,18.52 84.36,17.93 C83.84,17.35 83.44,16.66 83.17,15.88 C82.91,15.09 82.78,14.25 82.78,13.33 C82.78,12.42 82.91,11.57 83.17,10.78 L83.17,10.78 Z M85.32,15.34 C85.53,15.92 85.81,16.41 86.18,16.80 C86.54,17.19 86.96,17.49 87.45,17.70 C87.94,17.91 88.46,18.01 89.00,18.01 C89.55,18.01 90.06,17.91 90.55,17.70 C91.04,17.49 91.46,17.19 91.83,16.80 C92.19,16.41 92.48,15.92 92.68,15.34 C92.89,14.75 92.99,14.09 92.99,13.33 C92.99,12.58 92.89,11.91 92.68,11.33 C92.48,10.75 92.19,10.25 91.83,9.85 C91.46,9.45 91.04,9.15 90.55,8.94 C90.06,8.73 89.55,8.63 89.00,8.63 C88.46,8.63 87.94,8.73 87.45,8.94 C86.96,9.15 86.54,9.45 86.18,9.85 C85.81,10.25 85.53,10.75 85.32,11.33 C85.11,11.91 85.01,12.58 85.01,13.33 C85.01,14.09 85.11,14.75 85.32,15.34 L85.32,15.34 Z" id="Fill-6"></path>
    <path d="M97.83,7.12 L99.94,7.12 L99.94,19.53 L97.83,19.53 L97.83,7.12 Z" id="Fill-7"></path>
    <path d="M105.19,7.12 L105.19,9.08 L105.24,9.08 C106.12,7.58 107.51,6.83 109.41,6.83 C110.25,6.83 110.95,6.94 111.51,7.16 C112.08,7.39 112.53,7.70 112.88,8.10 C113.23,8.50 113.47,8.98 113.61,9.53 C113.75,10.08 113.82,10.69 113.82,11.36 L113.82,19.53 L111.71,19.53 L111.71,11.12 C111.71,10.36 111.48,9.75 111.02,9.30 C110.56,8.85 109.92,8.63 109.11,8.63 C108.46,8.63 107.91,8.72 107.43,8.92 C106.96,9.11 106.57,9.38 106.26,9.73 C105.94,10.08 105.71,10.50 105.55,10.97 C105.39,11.44 105.32,11.96 105.32,12.52 L105.32,19.53 L103.21,19.53 L103.21,7.12 L105.19,7.12" id="Fill-8"></path>
    <path d="M122.47,7.12 L122.47,8.92 L119.92,8.92 L119.92,16.62 C119.92,16.86 119.94,17.05 119.98,17.20 C120.02,17.34 120.10,17.46 120.22,17.54 C120.33,17.62 120.49,17.67 120.70,17.69 C120.91,17.71 121.18,17.73 121.50,17.73 L122.47,17.73 L122.47,19.53 L120.86,19.53 C120.32,19.53 119.85,19.49 119.46,19.42 C119.07,19.35 118.76,19.22 118.52,19.02 C118.28,18.83 118.10,18.56 117.99,18.21 C117.87,17.86 117.81,17.39 117.81,16.81 L117.81,8.92 L115.63,8.92 L115.63,7.12 L117.81,7.12 L117.81,3.39 L119.92,3.39 L119.92,7.12 L122.47,7.12" id="Fill-9"></path>
    <path d="M0.67,11.87 L2.62,13.76 L8.76,19.50 L11.41,16.94 C11.65,16.61 11.64,16.16 11.36,15.84 L8.94,13.72 L8.95,13.72 L6.34,11.19 C6.04,10.84 6.04,10.32 6.37,9.99 L13.38,3.21 L10.20,0.12 L0.68,9.31 C-0.05,10.02 -0.05,11.17 0.67,11.87" id="Fill-10"></path>
    <path d="M21.60,15.15 L19.66,13.27 L13.51,7.53 L10.86,10.08 C10.62,10.42 10.64,10.87 10.91,11.19 L13.33,13.31 L13.33,13.31 L15.93,15.84 C16.24,16.19 16.23,16.70 15.91,17.04 L8.89,23.82 L12.08,26.91 L19.65,19.60 L21.60,17.71 C22.33,17.01 22.33,15.86 21.60,15.15" id="Fill-11"></path>
    <path d="M44.55,4.58 C44.55,5.24 44.00,5.77 43.32,5.77 C42.64,5.77 42.09,5.24 42.09,4.58 C42.09,3.93 42.64,3.39 43.32,3.39 C44.00,3.39 44.55,3.93 44.55,4.58" id="Fill-12"></path>
    <path d="M100.11,4.58 C100.11,5.24 99.56,5.77 98.88,5.77 C98.20,5.77 97.65,5.24 97.65,4.58 C97.65,3.93 98.20,3.39 98.88,3.39 C99.56,3.39 100.11,3.93 100.11,4.58" id="Fill-13"></path>
  </g>
</svg>
              </div>
              <div class="l-d-f l-d-n--3col l-as-cen">
                <svg width="22px" height="27px" viewBox="0 0 22 27">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g transform="translate(-52.00, -407.00)" fill="#FFFFFF">
            <g transform="translate(52.00, 407.00)">
                <path d="M0.54,11.75 L2.49,13.64 L8.63,19.38 L11.28,16.82 C11.52,16.49 11.51,16.04 11.23,15.72 L8.81,13.60 L8.82,13.60 L6.21,11.07 C5.91,10.72 5.91,10.20 6.24,9.87 L13.25,3.09 L10.06,0 L0.54,9.19 C-0.18,9.90 -0.18,11.05 0.54,11.75"></path>
                <path d="M20.71,14.62 L18.76,12.74 L12.62,7 L9.97,9.55 C9.73,9.89 9.74,10.34 10.02,10.65 L12.44,12.78 L12.43,12.78 L15.04,15.31 C15.34,15.66 15.33,16.17 15.01,16.51 L8,23.29 L11.18,26.38 L18.75,19.06 L20.70,17.18 C21.43,16.48 21.44,15.33 20.71,14.62"></path>
            </g>
        </g>
    </g>
</svg>
              </div>
            </a>
          </section>

          <section class="l-d-f l-w-100 l-ai-str l-jc-fe">
                                      <a class="l-d-n l-d-f--3col l-ai-cen f-small f-light f-c-white NavBar_item" href="https://www.sitepoint.com/premium/deals/?ref_source=sitepoint&amp;ref_medium=topnav"><i class="l-mr2 f-medium fa fa-diamond"></i>Deals</a>
                        <a class="l-d-n l-d-f--3col l-ai-cen l-ml3 l-ml4--4col l-pa2 f-small f-light f-c-white NavBar_item" href="https://www.sitepoint.com/premium"><i class="l-mr2 f-medium fa fa-book"></i>Books &amp; Courses</a>
            <div class="l-d-f"><a href="https://www.sitepoint.com/premium/sign-in" class="Button u-small u-outline u-white l-as-cen l-ml3 l-d-n l-d-b--2col" style="border-width: 1px;">Login</a><a href="https://www.sitepoint.com/premium/l/monthly-membership?ref_source=sitepoint&amp;ref_medium=topnav" class="Button u-small l-as-cen l-ml3 l-d-n l-d-b--2col">Sign Up</a></div>
          </section>
        </div>
      </nav>

      <div class="l-d-n--3col NavBar_offsetSpacer"></div>

      <div class="widget maestro maestro-content-type-html " id="maestro-646"><sp-fixed-countdown-bar button_text="Get All Our Books and Courses For $9" button_url="/premium/l/monthly-membership?ref_source=sitepoint&amp;ref_medium=noticebar" buttonclass="u-red u-white" end="2017-10-17 9:54:00 +1000" end_message="Get in quick, we can&#39;t let this offer run forever!" landingpageclass="v3 l-ph3" ga_event_label="646"></sp-fixed-countdown-bar><script>ga('SitePointPlugin:observeImpressions', 'maestro-646')</script></div>    </header>
<div class="l-p-rel t-bg-white" role="main">
      <div class="l-p-rel l-w-100 l-mh-auto Article_overflow">
          <div class="l-w-100 t-bg">
      <div class="l-w-4col--4col l-mh3 l-mh-auto--3col">
        <div class="f-medium f-c-grey-200 l-pt3">
                <a href="https://www.sitepoint.com/ruby/" class="f-c-grey-200 f-bold l-pa2 l-d-if l-ai-cen">Ruby</a>
              <span>-</span> 
                <time class="l-d-ib l-pa2" datetime="2016-06-16" pubdate="">June 16, 2016</time>
                        <span>-</span> 
              <span class="l-d-ib l-pa2">By
                      <a href="https://www.sitepoint.com/author/ibodrov/" class="f-c-grey-200">
            Ilya Bodrov-Krukowski        </a>
          </span>
            </div>
        <div class="l-d-f l-fd-col l-fd-row--3col l-jc-sb">
          <h1 class="f-lh-title f-larger l-mb4 f-c-white f-xxlarge--2col">
            <span class="f-c-white l-mr3">Create a Chat App with Rails 5, ActionCable, and Devise</span>
          </h1>
                <div class="l-w-1col--3col l-as-cen l-fs0 l-d-n l-d-b--2col l-ml3">
        <div class="f-c-white f-small f-bold l-w-100 l-mb3">Related Topics:</div>
        <div class="l-d-f l-fw-w">
        <a class="f-c-white" href="https://www.sitepoint.com/ruby/gems/"><div class="ArticleTags l-mr2 f-smaller l-d-f l-jc-cen l-ai-cen l-mb3">Gems</div></a><a class="f-c-white" href="https://www.sitepoint.com/ruby/ruby-deployment/"><div class="ArticleTags l-mr2 f-smaller l-d-f l-jc-cen l-ai-cen l-mb3">Ruby Deployment</div></a><a class="f-c-white" href="https://www.sitepoint.com/ruby/best-practices/"><div class="ArticleTags l-mr2 f-smaller l-d-f l-jc-cen l-ai-cen l-mb3">Best Practices</div></a><a class="f-c-white" href="https://www.sitepoint.com/ruby/ruby-on-rails/"><div class="ArticleTags l-mr2 f-smaller l-d-f l-jc-cen l-ai-cen l-mb3">Ruby on Rails</div></a><a class="f-c-white" href="https://www.sitepoint.com/ruby/getting-started/"><div class="ArticleTags l-mr2 f-smaller l-d-f l-jc-cen l-ai-cen l-mb3">Getting Started</div></a><a class="f-c-white" href="https://www.sitepoint.com/ruby/"><div class="ArticleTags l-mr2 f-smaller l-d-f l-jc-cen l-ai-cen l-mb3">More...</div></a>        </div>
      </div>
              </div>
      </div>
    </div>
    
      <div class="l-d-f l-jc-sb l-w-4col--4col l-mh-auto" data-hellobar="content">
        <div class="l-w-100 l-w-2col-i--2col l-fg1 l-mh3--2col l-mh0--4col">
                        <div class="l-mb4 l-pa3 l-pt0">
    
      <div class="l-d-f l-jc-cen f-center l-mh-auto l-o-h l-mt3">
              </div>

        <div class="ArticleCopy language-">
      <div class="l-mt3 l-mh5--2col">
      <p><img src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/1466018138Fotolia_102360943_Subscription_Monthly_M-300x300.jpg" alt="" width="300" height="300" class="alignleft size-medium wp-image-133330"></p>
<p>Rails 5 has introduced a bunch of new great features, but one of the most anticipated ones is of course <a href="https://github.com/rails/rails/tree/master/actioncable">ActionCable</a>. ActionCable seamlessly integrates WebSockets into your application and offers both client-side JS and server-side Ruby frameworks. This way, you can write real-time features in the same styles as the rest your application, which is really cool.</p>
<p><em>Learn more on ruby with our tutorial <a href="https://www.sitepoint.com/premium/screencasts/feature-tests-with-rspec-simulate-user-behavior-and-test-your-ruby-app">Simulate User Behavior and Test Your Ruby App</a> on SitePoint.</em></p>
<p>Some months ago I wrote a series of articles describing how to build mini-chat with Rails using <a href="https://www.sitepoint.com/mini-chat-rails/">AJAX</a>, <a href="https://www.sitepoint.com/realtime-mini-chat-rails-faye/">WebSockets powered by Faye</a> and <a href="https://www.sitepoint.com/mini-chat-rails-server-sent-events/">Server-sent events</a>.  Those articles garnered some attention, so I decided to pen a new part of this series instructing how to use ActionCable to achieve the same goal.</p>
<p>This time, however, we will face a bit more complicated task and discuss the following topics:</p>
<ul><li>Preparing application and integrating Devise</li>
<li>Introducing chat rooms</li>
<li>Setting up ActionCable</li>
<li>Coding client-side</li>
<li>Coding server-side with the help of background jobs</li>
<li>Introducing basic authorization for ActionCable</li>
<li>Preparing application to be deployed to Heroku</li>
</ul><p>The source code can be found at <a href="https://github.com/bodrovis/Sitepoint-source/tree/master/Chat_with_ActionCable_and_Devise">GitHub</a>.</p>
<p>The working demo is available at <a href="https://sitepoint-actioncable.herokuapp.com/">sitepoint-actioncable.herokuapp.com</a>.</p>
<h2>Preparing the Application</h2>
<p>Start off by creating a new application. Support for ActionCable was added only in Rails 5, so you will have to use this version (currently 5.0.0.rc1 is the latest one):</p>
<pre class=" language-bash"><code class=" language-bash">$ rails new CableChat -T
</code></pre>
<p>Now add a couple of gems:</p>
<p><em>Gemfile</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
gem 'devise'
gem 'bootstrap', '~&gt; 4.0.0.alpha3'
[...]
</code></pre>
<p><a href="https://github.com/plataformatec/devise">Devise</a> will be used for authentication and authorization (you may read <a href="https://www.sitepoint.com/devise-authentication-in-depth/">this article</a> to learn more) and <a href="https://github.com/twbs/bootstrap-rubygem">Bootstrap 4</a> – for styling.</p>
<p>Run</p>
<pre class=" language-bash"><code class=" language-bash">$ bundle <span class="token function">install</span>
</code></pre>
<p>Add Bootstrap’s styles:</p>
<p><em>stylesheets/application.scss</em></p>
<pre class=" language-undefined"><code class=" language-undefined">@import "bootstrap";
</code></pre>
<p>Run the following commands to install Devise, generate a new <code class=" language-undefined">User</code> model, and copy views for further customization:</p>
<pre class=" language-bash"><code class=" language-bash">$ rails generate devise:install
$ rails generate devise User
$ rails generate devise:views
$ rails db:migrate
</code></pre>
<p>Now restrict access to all pages of the site to authenticated users only:</p>
<p><em>application_controller.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
before_action :authenticate_user!
[...]
</code></pre>
<h3>Chat Rooms</h3>
<p>The next step is to add support for chat rooms, so generate the following model:</p>
<pre class=" language-bash"><code class=" language-bash">$ rails g model ChatRoom title:string user:references
$ rails db:migrate
</code></pre>
<p>A chat room should have a creator, so make sure you establish a one-to-many relation between <code class=" language-undefined">chat_rooms</code> and <code class=" language-undefined">users</code>:</p>
<p><em>models/chat_room.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
belongs_to :user
[...]
</code></pre>
<p><em>models/users.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
has_many :chat_rooms, dependent: :destroy
[...]
</code></pre>
<p>Code a controller to list and create chat rooms:</p>
<p><em>chat_rooms_controller.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">class ChatRoomsController &lt; ApplicationController
  def index
    @chat_rooms = ChatRoom.all
  end

  def new
    @chat_room = ChatRoom.new
  end

  def create
    @chat_room = current_user.chat_rooms.build(chat_room_params)
    if @chat_room.save
      flash[:success] = 'Chat room added!'
      redirect_to chat_rooms_path
    else
      render 'new'
    end
  end

  private

  def chat_room_params
    params.require(:chat_room).permit(:title)
  end
end
</code></pre>
<p>Now a bunch of really simple views:</p>
<p><em>views/chat_rooms/index.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">&lt;h1&gt;Chat rooms&lt;/h1&gt;

&lt;p class="lead"&gt;&lt;%= link_to 'New chat room', new_chat_room_path, class: 'btn btn-primary' %&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;%= render @chat_rooms %&gt;
&lt;/ul&gt;
</code></pre>
<p><em>views/chat_rooms/_chat_room.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">&lt;li&gt;&lt;%= link_to "Enter #{chat_room.title}", chat_room_path(chat_room) %&gt;&lt;/li&gt;
</code></pre>
<p><em>views/chat_rooms/new.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">&lt;h1&gt;Add chat room&lt;/h1&gt;

&lt;%= form_for @chat_room do |f| %&gt;
  &lt;div class="form-group"&gt;
    &lt;%= f.label :title %&gt;
    &lt;%= f.text_field :title, autofocus: true, class: 'form-control' %&gt;
  &lt;/div&gt;

  &lt;%= f.submit "Add!", class: 'btn btn-primary' %&gt;
&lt;% end %&gt;
</code></pre>
<h3>Messages</h3>
<p>The main star of our app is, of course, a chat message. It should belong to both a user and a chat room. To get there, run the following:</p>
<pre class=" language-bash"><code class=" language-bash">$ rails g model Message body:text user:references chat_room:references
$ rails db:migrate
</code></pre>
<p>Make sure to establish the proper relations:</p>
<p><em>models/chat_room.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
belongs_to :user
has_many :messages, dependent: :destroy
[...]
</code></pre>
<p><em>models/users.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
has_many :chat_rooms, dependent: :destroy
has_many :messages, dependent: :destroy
[...]
</code></pre>
<p><em>models/message.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
belongs_to :user
belongs_to :chat_room
[...]
</code></pre>
<p>So far, so good. Messages should be displayed when a user enters a chat room, so create a new <code class=" language-undefined">show</code> action:</p>
<p><em>chat_rooms_controller.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
def show
  @chat_room = ChatRoom.includes(:messages).find_by(id: params[:id])
end
[...]
</code></pre>
<p>Note the <a href="http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-includes">includes</a> method here used for eager loading.</p>
<p>Now the views:</p>
<p><em>views/chat_rooms/show.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">&lt;h1&gt;&lt;%= @chat_room.title %&gt;&lt;/h1&gt;

&lt;div id="messages"&gt;
  &lt;%= render @chat_room.messages %&gt;
&lt;/div&gt;
</code></pre>
<p><em>views/messages/_message.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">&lt;div class="card"&gt;
  &lt;div class="card-block"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-1"&gt;
        &lt;%= gravatar_for message.user %&gt;
      &lt;/div&gt;
      &lt;div class="col-md-11"&gt;
        &lt;p class="card-text"&gt;
          &lt;span class="text-muted"&gt;&lt;%= message.user.name %&gt; at &lt;%= message.timestamp %&gt; says&lt;/span&gt;&lt;br&gt;
          &lt;%= message.body %&gt;
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>In this partial three new methods are employed: <code class=" language-undefined">user.name</code>, <code class=" language-undefined">message.timestamp</code> and <code class=" language-undefined">gravatar_for</code>. To construct a name, let’s simply strip off the domain part from the user’s email (of course, in a real app you’d want to allow them entering a name upon registration or at the “Edit profile” page):</p>
<p><em>models/user.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
def name
  email.split('@')[0]
end
[...]
</code></pre>
<p><code class=" language-undefined">timestamp</code> relies on <code class=" language-undefined">strftime</code> to present message’s creation date in a user-friendly format:</p>
<p><em>models/message.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
def timestamp
  created_at.strftime('%H:%M:%S %d %B %Y')
end
[...]
</code></pre>
<p><code class=" language-undefined">gravatar_for</code> is a helper to display user’s gravatar:</p>
<p><em>application_helper.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">module ApplicationHelper
  def gravatar_for(user, opts = {})
    opts[:alt] = user.name
    image_tag "https://www.gravatar.com/avatar/#{Digest::MD5.hexdigest(user.email)}?s=#{opts.delete(:size) { 40 }}",
              opts
  end
end
</code></pre>
<p>The last two things to do here is to style the messages container a bit:</p>
<pre class=" language-undefined"><code class=" language-undefined">#messages {
  max-height: 450px;
  overflow-y: auto;
  .avatar {
    margin: 0.5rem;
  }
}
</code></pre>
<p>Add routes:</p>
<p><em>config/routes.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
resources :chat_rooms, only: [:new, :create, :show, :index]
root 'chat_rooms#index'
[...]
</code></pre>
<p>Finally, preparations are done and we can proceed to coding the core functionality of our chat.</p>
<h2>Adding ActionCable</h2>
<h3>Client Side</h3>
<p>Before proceeding, install Redis on your machine if you do not already have it. Redis is available for <a href="http://redis.io/download">nix</a>, via <a href="http://brew.io/">Homebrew</a> and for <a href="https://github.com/MSOpenTech/redis">Windows</a>, as well.</p>
<p>Next, tweak the Gemfile:</p>
<p><em>Gemfile</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
gem 'redis', '~&gt; 3.2'
[...]
</code></pre>
<p>and run</p>
<pre class=" language-bash"><code class=" language-bash">$ bundle <span class="token function">install</span>
</code></pre>
<p>Now you may modify the <em>config/cable.yml</em> file to use Redis as an adapter:</p>
<p><em>config/cable.yml</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
adapter: redis
url: YOUR_URL
[...]
</code></pre>
<p>Or simply use <code class=" language-undefined">adapter: async</code> (the default value).</p>
<p>Also, modify your <em>routes.rb</em> to mount ActionCable on some URL:</p>
<p><em>config/routes.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
mount ActionCable.server =&gt; '/cable'
[...]
</code></pre>
<p>Check that inside the <em>javascripts</em> directory there is a <em>cable.js</em> file with the contents like:</p>
<p><em>javascripts/cable.js</em></p>
<pre class=" language-undefined"><code class=" language-undefined">//= require action_cable
//= require_self
//= require_tree ./channels

(function() {
  this.App || (this.App = {});

  App.cable = ActionCable.createConsumer();

}).call(this);
</code></pre>
<p>This file must be required inside <em>application.js</em>:</p>
<p><em>javascripts/application.js</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
//= require cable
[...]
</code></pre>
<p><code class=" language-undefined">Consumer</code> is a client of a web socket connection that can subscribe to one or multiple channels. Each ActionCable server may handle multiple connections. <code class=" language-undefined">Channel</code> is similar to an MVC controller and is used for streaming. You may read more about ActionCable’s terminology <a href="https://github.com/rails/rails/tree/master/actioncable#terminology">here</a>.</p>
<p>So, let’s create a new channel:</p>
<p><em>javascripts/channels/rooms.coffee</em></p>
<pre class=" language-javascript"><code class=" language-javascript">App<span class="token punctuation">.</span>global_chat <span class="token operator">=</span> App<span class="token punctuation">.</span>cable<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span>create <span class="token punctuation">{</span>
    channel<span class="token punctuation">:</span> <span class="token string">"ChatRoomsChannel"</span>
    chat_room_id<span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  connected<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    # Called when the subscription is ready <span class="token keyword">for</span> use on the server

  disconnected<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    # Called when the subscription has been terminated by the server

  received<span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    # Data received

  send_message<span class="token punctuation">:</span> <span class="token punctuation">(</span>message<span class="token punctuation">,</span> chat_room_id<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    @perform <span class="token string">'send_message'</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> message<span class="token punctuation">,</span> chat_room_id<span class="token punctuation">:</span> chat_room_id
</code></pre>
<p>Here, we basically subscribe a consumer to the <code class=" language-undefined">ChatRoomsChannel</code> and pass the current room’s id (at this point we do not really pass anything, but that’ll be fixed soon). The subscription has a number of self-explaining callbacks: <code class=" language-undefined">connected</code>, <code class=" language-undefined">disconnected</code>, and <code class=" language-undefined">received</code>. Also, the subscription defines the main function (<code class=" language-undefined">send_message</code>) that invokes the method with the same name of the server and passes the necessary data to it.</p>
<p>Of course, we need a form to allow users to send their messages:</p>
<p><em>views/chat_rooms/show.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">&lt;%= form_for @message, url: '#' do |f| %&gt;
  &lt;div class="form-group"&gt;
    &lt;%= f.label :body %&gt;
    &lt;%= f.text_area :body, class: 'form-control' %&gt;
    &lt;small class="text-muted"&gt;From 2 to 1000 characters&lt;/small&gt;
  &lt;/div&gt;

  &lt;%= f.submit "Post", class: 'btn btn-primary btn-lg' %&gt;
&lt;% end %&gt;
</code></pre>
<p>The <code class=" language-undefined">@message</code> instance variable should be set inside the controller:</p>
<p><em>chat_rooms_controller.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
def show
  @chat_room = ChatRoom.includes(:messages).find_by(id: params[:id])
  @message = Message.new
end
[...]
</code></pre>
<p>Of course, you might use the basic <code class=" language-undefined">form</code> tag instead of relying on the Rails form builder, but this allows us to take advantage of things like I18n translations later.</p>
<p>Let’s also add some validations for messages:</p>
<p><em>models/message.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
validates :body, presence: true, length: {minimum: 2, maximum: 1000}
[...]
</code></pre>
<p>Another problem to tackle here is providing our script with the room’s id. Let’s solve it with the help of HTML <code class=" language-undefined">data-</code> attribute:</p>
<p><em>views/chat_rooms/show.html.erb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
&lt;div id="messages" data-chat-room-id="&lt;%= @chat_room.id %&gt;"&gt;
  &lt;%= render @chat_room.messages %&gt;
&lt;/div&gt;
[...]
</code></pre>
<p>Having this in place, we can use room’s id in the script:</p>
<p><em>javascripts/channels/rooms.coffee</em></p>
<pre class=" language-undefined"><code class=" language-undefined">jQuery(document).on 'turbolinks:load', -&gt;
  messages = $('#messages')
  if $('#messages').length &gt; 0

    App.global_chat = App.cable.subscriptions.create {
        channel: "ChatRoomsChannel"
        chat_room_id: messages.data('chat-room-id')
      },
      connected: -&gt;
        # Called when the subscription is ready for use on the server

      disconnected: -&gt;
        # Called when the subscription has been terminated by the server

      received: (data) -&gt;
        # Data received

      send_message: (message, chat_room_id) -&gt;
        @perform 'send_message', message: message, chat_room_id: chat_room_id
</code></pre>
<p>Note the <code class=" language-undefined">jQuery(document).on 'turbolinks:load'</code> part. This should be done only if you are using <a href="https://github.com/turbolinks/turbolinks-classic">Turbolinks</a> 5 that supports this new event. You might think about usng <a href="https://rubygems.org/gems/jquery-turbolinks">jquery-turbolinks</a> to bring the default jQuery events back, but unfortunately it <a href="https://github.com/kossnocorp/jquery.turbolinks/issues/56">is not compatible with Turbolinks 5</a>.</p>
<p>The logic of the script is pretty simple: check if there is a <code class=" language-undefined">#messages</code> block on the page and, if yes, subscribe to the channel while providing the room’s id. The next step is to listen for the form’s <code class=" language-undefined">submit</code> event: </p>
<p><em>javascripts/channels/rooms.coffee</em></p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span>on <span class="token string">'turbolinks:load'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
  messages <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#messages'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#messages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>

    App<span class="token punctuation">.</span>global_chat <span class="token operator">=</span> App<span class="token punctuation">.</span>cable<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span>create
    # <span class="token operator">...</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#new_message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>submit <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
      $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      textarea <span class="token operator">=</span> $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'#message_body'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> $<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span>textarea<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span>
        App<span class="token punctuation">.</span>global_chat<span class="token punctuation">.</span>send_message textarea<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> messages<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'chat-room-id'</span><span class="token punctuation">)</span>
        textarea<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
</code></pre>
<p>When the form is submitted, take the message’s body, check that its length is at least two and then call the <code class=" language-undefined">send_message</code> function to broadcast the new message to all visitors of the chat room. Next, clear the textarea and prevent form submission.</p>
<h3>Server Side</h3>
<p>Our next task will be to introduce a channel on our server. In Rails 5, there is a new directory called <em>channels</em> to host them, so create a <em>chat_rooms_channel.rb</em> file there:</p>
<p><em>channels/chat_rooms_channel.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">class ChatRoomsChannel &lt; ApplicationCable::Channel
  def subscribed
    stream_from "chat_rooms_#{params['chat_room_id']}_channel"
  end

  def unsubscribed
    # Any cleanup needed when channel is unsubscribed
  end

  def send_message(data)
    # process data sent from the page
  end
end
</code></pre>
<p><code class=" language-undefined">subscribed</code> is a special method to start streaming from a channel with a given name. As long as we have multiple rooms, the channel’s name will vary. Remember, we provided <code class=" language-undefined">chat_room_id: messages.data('chat-room-id')</code> when subscribing to a channel in our script? Thanks to it, <code class=" language-undefined">chat_room_id</code> can be fetched inside the <code class=" language-undefined">subscribed</code> method by calling <code class=" language-undefined">params['chat_room_id']</code>.</p>
<p><code class=" language-undefined">unsubscribed</code> is a callback that fires when the streaming is stopped, but we won’t use it in this demo.</p>
<p>The last method – <code class=" language-undefined">send_message</code> – fires when we run <code class=" language-undefined">@perform 'send_message', message: message, chat_room_id: chat_room_id</code> from our script. The <code class=" language-undefined">data</code> variable contains a hash of sent data, so, for example, to access the message you would type <code class=" language-undefined">data['message']</code>.</p>
<p>There are multiple ways to broadcast the received message, but I am going to show you a very neat solution based on the demo provided by DHH (I’ve also found <a href="http://www.akitaonrails.com/2015/12/28/fixing-dhh-s-rails-5-chat-demo">this article</a> with a slightly different approach). </p>
<p>First of all, modify the <code class=" language-undefined">send_message</code> method:</p>
<p><em>channels/chat_rooms_channel.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
def send_message(data)
  current_user.messages.create!(body: data['message'], chat_room_id: data['chat_room_id'])
end
[...]
</code></pre>
<p>Once we receive a message, save it to the database. You don’t even need to check whether the provided chat room exists – by default, in Rails 5, a record’s parent must exist in order to save it. This behavior can be changed by setting <code class=" language-undefined">optional: true</code> for the <code class=" language-undefined">belongs_to</code> relation (read about other changes in Rails 5 <a href="https://www.sitepoint.com/onwards-to-rails-5-additions-changes-and-deprecations/">here</a>). </p>
<p>There is a problem though – Devise’s <code class=" language-undefined">current_user</code> method is not available for us here. To fix that, modify the <em>connection.rb</em> file inside the <em>application_cable</em> directory:</p>
<p><em>channels/application_cable/connection.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">module ApplicationCable
  class Connection &lt; ActionCable::Connection::Base
    identified_by :current_user

    def connect
      self.current_user = find_verified_user
      logger.add_tags 'ActionCable', current_user.email
    end

    protected

    def find_verified_user # this checks whether a user is authenticated with devise
      if verified_user = env['warden'].user
        verified_user
      else
        reject_unauthorized_connection
      end
    end
  end
end
</code></pre>
<p>Having this in place, we achieve even two goals at once: the <code class=" language-undefined">current_user</code> method is now available for the channel and unauthenticated users are not able to broadcast their messages.</p>
<p>The call to <code class=" language-undefined">logger.add_tags 'ActionCable', current_user.email</code> is used to display debugging information in the console, so you will see output similar to this:</p>
<pre class=" language-bash"><code class=" language-bash"><span class="token punctuation">[</span>ActionCable<span class="token punctuation">]</span> <span class="token punctuation">[</span>test@example.com<span class="token punctuation">]</span> Registered connection <span class="token punctuation">(</span>Z2lkOi8vY2FibGUtY2hhdC9Vc2VyLzE<span class="token punctuation">)</span>
<span class="token punctuation">[</span>ActionCable<span class="token punctuation">]</span> <span class="token punctuation">[</span>test@example.com<span class="token punctuation">]</span> ChatRoomsChannel is transmitting the subscription confirmation
<span class="token punctuation">[</span>ActionCable<span class="token punctuation">]</span> <span class="token punctuation">[</span>test@example.com<span class="token punctuation">]</span> ChatRoomsChannel is streaming from chat_rooms_1_channel
</code></pre>
<p>Under the hood Devise uses <a href="https://github.com/hassox/warden">Warden</a> for authentication, so <code class=" language-undefined">env['warden'].user</code> tries to fetch the currently logged-in user. If it is not found, <code class=" language-undefined">reject_unauthorized_connection</code> forbids broadcasting.</p>
<p>Now, let’s add a callback that fires after the message is actually saved to the database to schedule a background job:</p>
<p><em>models/message.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
after_create_commit { MessageBroadcastJob.perform_later(self) }
[...]
</code></pre>
<p>In this callback <code class=" language-undefined">self</code> is a saved message, so we basically pass it to the job. Write the job now:</p>
<p><em>jobs/message_broadcast_job.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">class MessageBroadcastJob &lt; ApplicationJob
  queue_as :default

  def perform(message)
    ActionCable.server.broadcast "chat_rooms_#{message.chat_room.id}_channel",
                                 message: 'MESSAGE_HTML'
  end
end
</code></pre>
<p>The <code class=" language-undefined">perform</code> method does the actual broadcasting, but what about the data we want to broadcast? Once again, there are a couple of ways to solve this problem. You may send JSON with the message data and then on the client side use a templating engine like <a href="http://handlebarsjs.com/">Handlebars</a>. In this demo, however, let’s send HTML markup from the <em>messages/_message.html.erb</em> partial we created earlier. This partial can be rendered with the help of a controller:</p>
<p><em>jobs/message_broadcast_job.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">class MessageBroadcastJob &lt; ApplicationJob
  queue_as :default

  def perform(message)
    ActionCable.server.broadcast "chat_rooms_#{message.chat_room.id}_channel",
                                 message: render_message(message)
  end

  private

  def render_message(message)
    MessagesController.render partial: 'messages/message', locals: {message: message}
  end
end
</code></pre>
<p>In order for this to work, you’ll have to create an empty <code class=" language-undefined">MessagesController</code>:</p>
<p><em>messages_controller.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">class MessagesController &lt; ApplicationController
end
</code></pre>
<div class="widget maestro maestro-content-type-html " id="maestro-652"><span data-sumome-listbuilder-embed-id="a5047315669ea28f9652485dfd816e21a7b7d3873736b516d897111b300bf50b"></span><script>ga('SitePointPlugin:observeImpressions', 'maestro-652')</script></div><h2>Back to the Client Side</h2>
<p>Great, now the server side is ready and we can finalize our script. As long as we broadcast HTML markup, it can be simply placed right onto the page without any further manipulations:</p>
<p><em>javascripts/channels/rooms.coffee</em></p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
App<span class="token punctuation">.</span>global_chat <span class="token operator">=</span> App<span class="token punctuation">.</span>cable<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span>create <span class="token punctuation">{</span>
    channel<span class="token punctuation">:</span> <span class="token string">"ChatRoomsChannel"</span>
    chat_room_id<span class="token punctuation">:</span> messages<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">'chat-room-id'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  connected<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    # Called when the subscription is ready <span class="token keyword">for</span> use on the server

  disconnected<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    # Called when the subscription has been terminated by the server

  received<span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    messages<span class="token punctuation">.</span>append data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span>

  send_message<span class="token punctuation">:</span> <span class="token punctuation">(</span>message<span class="token punctuation">,</span> chat_room_id<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    @perform <span class="token string">'send_message'</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> message<span class="token punctuation">,</span> chat_room_id<span class="token punctuation">:</span> chat_room_id
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
</code></pre>
<p>The only thing I don’t really like here is that, by default, the user sees old messages, whereas the newer ones are being placed at the bottom. You could either use the <code class=" language-undefined">order</code> method to sort them properly and replace <code class=" language-undefined">append</code> with <code class=" language-undefined">prepend</code> inside the <code class=" language-undefined">received</code> callback, but I’d like to make our chat behave like Slack. In Slack, newer messages are also placed at the bottom, but the chat window automatically scrolls to them. That’s easy to achieve with the following function that is called once the page is loaded:</p>
<p><em>javascripts/channels/rooms.coffee</em></p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span>on <span class="token string">'turbolinks:load'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
  messages <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#messages'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#messages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
    messages_to_bottom <span class="token operator">=</span> <span class="token operator">-</span><span class="token operator">&gt;</span> messages<span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span>messages<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">"scrollHeight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token function">messages_to_bottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    App<span class="token punctuation">.</span>global_chat <span class="token operator">=</span> App<span class="token punctuation">.</span>cable<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span>create
    # <span class="token operator">...</span>
</code></pre>
<p>Let’s also scroll to the bottom once a new message has arrived (because by default it won’t be focused):</p>
<p><em>javascripts/channels/rooms.coffee</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
received: (data) -&gt;
  messages.append data['message']
  messages_to_bottom()
[...]
</code></pre>
<p>Great! Check out the resulting script <a href="https://github.com/bodrovis/Sitepoint-source/blob/master/Chat_with_ActionCable_and_Devise/app/assets/javascripts/channels/rooms.coffee">on GitHub</a>.</p>
<h2>Pushing to Heroku</h2>
<p>If you wish to push your new shiny chat to Heroku, some additional actions have to be taken. First of all, you will have install a Redis addon. There are many <a href="https://elements.heroku.com/">addons</a> to choose from: for example, you could use <a href="https://elements.heroku.com/addons/rediscloud">Rediscloud</a>.  When the addon is installed, tweak <em>cable.yml</em> to provide the proper Redis URL. For Rediscloud it is stored inside the <code class=" language-undefined">ENV["REDISCLOUD_URL"]</code> environment variable:</p>
<p><em>config/cable.yml</em></p>
<pre class=" language-undefined"><code class=" language-undefined">production:
  adapter: redis
  url: &lt;%= ENV["REDISCLOUD_URL"] %&gt;
[...]
</code></pre>
<p>The next step is to list the allowed origins to subscribe to the channels:</p>
<p><em>config/environments/production.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
config.action_cable.allowed_request_origins = ['https://your_app.herokuapp.com',
                                               'http://your_app.herokuapp.com']
[...]
</code></pre>
<p>Lastly, you have to provide the ActionCable URL. As long as our <em>routes.rb</em> has <code class=" language-undefined">mount ActionCable.server =&gt; '/cable'</code>, the corresponding setting should be:</p>
<p><em>config/environments/production.rb</em></p>
<pre class=" language-undefined"><code class=" language-undefined">[...]
config.action_cable.url = "wss://sitepoint-actioncable.herokuapp.com/cable"
[...]
</code></pre>
<p>Having this in place, you can push your code to Heroku and observe the result. Yay!</p>

<h2>Conclusion</h2>
<p>In this article we’ve discussed how to set up ActionCable and code a mini-chat app with support for multiple rooms. The app includes both the client and server sides, while providing a basic authorization mechanism. We also employed a background job to power up the broadcasting process and discussed steps required to deploy the application to Heroku.</p>
<p>Hopefully, you found this article useful and interesting. Have you already tried using ActionCable? Did you like it? Share your opinion in the comments. Follow me on Twitter to be the first one to know about my articles, and see you soon!</p>
<p><em>Learn more on ruby with our tutorial <a href="https://www.sitepoint.com/create-a-chat-app-with-rails-5-actioncable-and-devise/%E2%80%9Chttps://www.sitepoint.com/premium/screencasts/feature-tests-with-rspec-simulate-user-behavior-and-test-your-ruby-app%E2%80%9D">Simulate User Behavior and Test Your Ruby App</a> on SitePoint.</em></p>
      <div class="Article_authorBio l-mv4 t-bg-white m-border l-pa3">
        <div class="l-d-f l-pt3">
          <a class="l-s5 l-pa0 l-mr3 l-round l-o-h" href="https://www.sitepoint.com/author/ibodrov/">
            <img src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/1455561538cr_thumb-96x96.jpg" width="96" height="96" alt="Ilya Bodrov-Krukowski" class="avatar avatar-96 wp-user-avatar wp-user-avatar-96 alignnone photo">          </a>
          <div class="f-lh-title">
            <div class="f-c-grey-300">Meet the author</div>
            <div class="f-large">
              <a class="f-bold f-c-grey-500" href="https://www.sitepoint.com/author/ibodrov/">
                Ilya Bodrov-Krukowski              </a>
              <a class="f-c-grey-500 l-mh1" target="_blank" href="https://twitter.com/bodrovis"><i class="fa fa-twitter"></i></a><a class="f-c-grey-500 l-mh1" target="_blank" href="https://plus.google.com/103641984440210150447"><i class="fa fa-google-plus"></i></a><a class="f-c-grey-500 l-mh1" target="_blank" href="https://facebook.com/isbodrov"><i class="fa fa-facebook"></i></a><a class="f-c-grey-500 l-mh1" target="_blank" href="https://linkedin.com/in/bodrovis"><i class="fa fa-linkedin"></i></a><a class="f-c-grey-500 l-mh1" target="_blank" href="https://github.com/bodrovis"><i class="fa fa-github"></i></a>            </div>
          </div>
        </div>
        <div class="f-light f-lh-copy l-mt3">Ilya Bodrov is personal IT teacher, a senior engineer working at Campaigner LLC, author and teaching assistant at Sitepoint and lecturer at Moscow Aviations Institute. His primary programming languages are Ruby (with Rails) and JavaScript. He enjoys coding, teaching people and learning new things. Ilya also has some Cisco and Microsoft certificates and was working as a tutor in an educational center for a couple of years. In his free time he tweets, writes posts for his <a href="http://bodrovis.tech/">website</a>, participates in OpenSource projects, goes in for sports and plays music.</div>
      </div>
            
      </div>
    </div>
        </div>
            </div>
            <div class="l-w-aside-i l-mt6 l-mh3 l-d-n l-d-f--3col l-fd-col l-fs0">
      <div class="l-mb3">
        <div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-1"><!-- SP2013_Articles_300x250_1 -->
<div id="div-gpt-ad-1392428092543-0" style="" class="adspot ">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-0"); });</script>
    <script type="text/javascript">
      window.SP_GPT_Slots.push({
        id      : "1392428092543-0",
        name    : "SP2013_Articles_300x250_1",
        sizes   : [300,250],
        desktop : 1,
        tablet  : 1,
        phone   : 0
      });
    </script>
 </div></div>      </div>
          <div class="l-as-fs l-mv0 l-pv1 l-ph3 f-light f-larger f-uppercase f-c-white t-bg-grey-500">Sponsors</div>
    <div class="l-w-100 l-mv3 t-bg-white m-border"><div class="widget maestro maestro-content-type-bsa hide-for-mobile-SP" id="maestro-448"><div class="l-pa3" style="border-bottom: 1px solid #e5e5e5" id="maestro-448-bsa-154006">
<a href="https://srv.buysellads.com/ads/click/x/GTND42QEFTYIPKJ7C6SLYKQMCTAD623ICABDLZ3JCWYDEKJ7CKSDC53KC6BIT53JCA7I6K3EHJNCLSIZ" class="l-d-f l-ai-sta" data-ga-on="click" data-ga-event-category="maestro" data-ga-event-label="maestro-448-bsa-154006" data-ga-event-action="click">
<img class="l-s5" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/1504733716-32466.png">
<div class="f-small l-d-f l-fd-col l-ml3 f-lh-title f-c-grey-700">
<span class="f-bold">New and Awesome Tool</span>
<span>Hotjar is a new and easy way to truly understand your web and mobile site visitors.</span>
</div>
</a>
</div><script>ga('SitePointPlugin:observeImpressions', ['maestro-448-bsa-154006'])</script></div></div>
          <div class="ArticleBox u-premium-preview"></div>
      <div class="ArticleAside_row ArticleAside_newboxads"><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-251"><!-- SP_Articles_200x125_1 -->
<div id="div-gpt-ad-1436815711585-0" style="" class="adspot ">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1436815711585-0"); });</script>
    <script type="text/javascript">
      window.SP_GPT_Slots.push({
        id      : "1436815711585-0",
        name    : "SP_Articles_200x125_1",
        sizes   : [200,125],
        desktop : 1,
        tablet  : 1,
        phone   : 0
      });
    </script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-252"><!-- SP_Articles_200x125_2 -->
<div id="div-gpt-ad-1436815711585-1" style="" class="adspot ">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1436815711585-1"); });</script>
    <script type="text/javascript">
      window.SP_GPT_Slots.push({
        id      : "1436815711585-1",
        name    : "SP_Articles_200x125_2",
        sizes   : [200,125],
        desktop : 1,
        tablet  : 1,
        phone   : 0
      });
    </script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-253"><!-- SP_Articles_200x125_3 -->
<div id="div-gpt-ad-1436815711585-2" style="" class="adspot ">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1436815711585-2"); });</script>
    <script type="text/javascript">
      window.SP_GPT_Slots.push({
        id      : "1436815711585-2",
        name    : "SP_Articles_200x125_3",
        sizes   : [200,125],
        desktop : 1,
        tablet  : 1,
        phone   : 0
      });
    </script>
 </div></div><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-254"><!-- SP_Articles_200x125_4 -->
<div id="div-gpt-ad-1436815711585-3" style="" class="adspot ">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1436815711585-3"); });</script>
    <script type="text/javascript">
      window.SP_GPT_Slots.push({
        id      : "1436815711585-3",
        name    : "SP_Articles_200x125_4",
        sizes   : [200,125],
        desktop : 1,
        tablet  : 1,
        phone   : 0
      });
    </script>
 </div></div></div>
      <div class="ArticleAside_row"><div class="widget maestro maestro-content-type-ad hide-for-mobile-SP" id="maestro-56"><!-- SP2013_Articles_300x600_1 -->
<div id="div-gpt-ad-1392428092543-4" style="" class="adspot na">
    <script type="text/javascript">googletag.cmd.push(function() { googletag.display("div-gpt-ad-1392428092543-4"); });</script>
    <script type="text/javascript">
      window.SP_GPT_Slots.push({
        id      : "1392428092543-4",
        name    : "SP2013_Articles_300x600_1",
        sizes   : [[300, 600], [300, 250], [160, 600]],
        desktop : 1,
        tablet  : 1,
        phone   : 0
      });
    </script>
 </div></div>        <ads-weighted widget="21" data="{&quot;NL&quot;:[{&quot;id&quot;:&quot;585&quot;,&quot;demandbase_field&quot;:null,&quot;demandbase_value&quot;:null,&quot;weight&quot;:&quot;50&quot;,&quot;randMax&quot;:50},{&quot;id&quot;:&quot;584&quot;,&quot;demandbase_field&quot;:null,&quot;demandbase_value&quot;:null,&quot;weight&quot;:&quot;50&quot;,&quot;randMax&quot;:100}]}" fallback="" url="create-a-chat-app-with-rails-5-actioncable-and-devise" channelslug="ruby"></ads-weighted></div>
    </div>
          </div>
      
      <div class="u-accordion-end"></div>
      <div class="l-d-f l-jc-sb l-w-3col--3col l-mh-auto">
        <div class="u-showseriesx l-w-100 l-w-2col-i--2col l-fg1 l-mh3--2col l-mh0--4col">
          
          
                    <div id="commentsSection" class="l-pa3 t-bg-white">
                        <a id="comments"></a>
                      </div>
        </div>
      </div>

    
    <script>
      OneSignal.push(function() {
        OneSignal.sendTags({
          ruby: 'ruby',
        });
      });
    </script>
      </div>
    </div>
        <footer role="contentinfo">
  <div class="l-w-100 l-d-f Footer-bg">
    <div class="l-d-f l-fw-w l-mh-auto">
      <div class="l-d-f l-fw-w l-mt4 l-w-100 l-pa3 l-w-3col--4col l-jc-sb l-jc-sa--4col">
        <ul>
          <li class="t-ls-n">
            <div class="f-c-white f-large f-bold l-mb2">Stuff We Do</div>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/premium/">Premium</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/versioning/">Versioning</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/themes/">Themes</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/community/">Forums</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/html-css/css/">References</a>
          </li>
        </ul>

        <ul>
          <li class="t-ls-n">
            <div class="f-c-white f-large f-bold l-mb2">About</div>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/about-us/">Our Story</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/press/">Press Room</a>
          </li>
        </ul>

        <ul>
          <li class="t-ls-n">
            <div class="f-c-white f-large f-bold l-mb2">Contact</div>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/contact-us/">Contact Us</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://sitepoint.zendesk.com/hc/en-us">FAQ</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/write-for-us/">Write for Us</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/advertise/">Advertise</a>
          </li>
        </ul>

        <ul>
          <li class="t-ls-n">
            <div class="f-c-white f-large f-bold l-mb2">Legals</div>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/legals/">Terms of Use</a>
          </li>
          <li class="l-ml3 f-c-grey-300 l-mb2">
            <a class="Footer-link f-small" href="https://www.sitepoint.com/legals/#privacy">Privacy Policy</a>
          </li>
        </ul>
      </div>
      <div class="l-d-n l-d-b--4col l-as-cen Footer-hr">
      </div>
      <div class="l-mt4 l-pa3 l-w-1col--4col">
        <ul class="t-ls-n l-d-f l-fw-w l-d-b--3col">
          <li>
            <div class="f-c-white f-large f-bold l-mb2 l-mr3">Connect</div>
          </li>
          <li class="f-center">
            <a class="f-c-grey-300" href="https://www.facebook.com/sitepoint" rel="noopener" target="_blank">
              <i class="fa fa-facebook-square l-i4"></i>
            </a>
            <a class="l-pl3 f-c-grey-300" href="http://twitter.com/sitepointdotcom" rel="noopener" target="_blank">
              <i class="fa fa-twitter-square l-i4"></i>
            </a>
            <a class="l-pl3 f-c-grey-300" href="https://www.sitepoint.com/versioning/">
              <i class="fa fa-envelope-square l-i4"></i>
            </a>
            <a class="l-pl3 f-c-grey-300" href="https://www.sitepoint.com/feed/">
              <i class="fa fa-rss-square l-i4"></i>
            </a>
            <a class="l-pl3 f-c-grey-300" href="https://plus.google.com/+sitepoint" rel="noopener" target="_blank">
              <i class="fa fa-google-plus-square l-i4"></i>
            </a>
          </li>
          <p class="f-c-grey-300 l-mh-auto l-ml3--2col l-ml0--3col l-mv3--4col f-small f-center">
            © 2000 – 2017 SitePoint Pty. Ltd.
          </p>
        </ul>
      </div>
    </div>
  </div>
  <div class="l-w-100 l-d-f t-bg-white l-jc-cen">
    <div class="l-mv5 l-d-f l-fw-w l-jc-cen">
      <span class="f-bold l-as-cen f-large f-c-grey-300 l-mr3 l-mb3 l-mb0--2col">Recommended Hosting Partner:</span>
      <a href="https://www.siteground.com/go/sitepoint-siteground-promo">
        <img class="l-ml5--2col" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/siteground.png">
      </a>
    </div>
  </div>
</footer>
    <script type="text/javascript">
  adroll_adv_id = "DJI3I3WGJBGL7PDJEDAYHV";
  adroll_pix_id = "4RKMV6N56FGA7ANPGL4FQW";
  (function () {
    var adblocked = false;
    var onAdblock = function() {
      if(adblocked) return;

      adblocked = true;

      gaEventQueue && gaEventQueue.track('CanSeeAds', 'adrollBlocked', {'nonInteraction': true});

      Array.prototype.slice.call(document.getElementsByClassName('CantSeeAds'))
        .forEach(function(el) {
          el.className = el.className.replace('CantSeeAds', '');
        });

    };
    var _onload = function(){
      if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
      if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
      var scr = document.createElement("script");
      var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
      scr.setAttribute('async', 'true');
      scr.type = "text/javascript";
      scr.src = host + "/j/roundtrip.js";
      scr.onerror = onAdblock;
      ((document.getElementsByTagName('head') || [null])[0] ||
          document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
    };
    if (window.addEventListener) {window.addEventListener('load', _onload, false);}
    else {window.attachEvent('onload', _onload)}
  }());
</script>
    <script>
(function(d,b,a,s,e){ var t = b.createElement(a),
  fs = b.getElementsByTagName(a)[0]; t.async=1; t.id=e; t.src=s;
  fs.parentNode.insertBefore(t, fs); })
(window,document,'script','https://scripts.demandbase.com/IM2QfEma.min.js','demandbase_js_lib');
</script>
    				<script type="text/javascript"><!--
			var seriesdropdown = document.getElementById("orgseries_dropdown");
			if (seriesdropdown) {
			 function onSeriesChange() {
					if ( seriesdropdown.options[seriesdropdown.selectedIndex].value != ( 0 || -1 ) ) {
						location.href = "https://www.sitepoint.com/series/"+seriesdropdown.options[seriesdropdown.selectedIndex].value;
					}
				}
				seriesdropdown.onchange = onSeriesChange;
			}
			--></script>
			        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'sitepointproduction';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1 && nodes[i].parentNode.tagName == 'A') {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
        
<!-- START Parse.ly Include: Standard -->
<div id="parsely-root" style="display: none">
  <div id="parsely-cfg" data-parsely-site="sitepoint.com"></div>
<script id="parsely-script" async="" data-cfasync="false" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/p.js.descarga"></script></div>
<script data-cfasync="false">
(function(s, p, d) {
  var h=d.location.protocol, i=p+"-"+s,
      e=d.getElementById(i), r=d.getElementById(p+"-root"),
      u=h==="https:"?"d1z2jf7jlzjs58.cloudfront.net"
      :"static."+p+".com";
  if (e) return;
  e = d.createElement(s); e.id = i; e.async = true;
  e.setAttribute('data-cfasync', 'false'); e.src = h+"//"+u+"/p.js"; r.appendChild(e);
})("script", "parsely", document);
</script>
<!-- END Parse.ly Include: Standard -->
    <script type="text/javascript">
    (function(googletag, SP_GPT_Slots) {
      if(!SP_GPT_Slots.length) return;

      var SP_GPT_First_Slot_Rendered = false;
      googletag.cmd.push(function(){
        googletag.pubads().addEventListener("slotRenderEnded", function(e){
          if (!SP_GPT_First_Slot_Rendered) {
            gaEventQueue.track("CanSeeAds", "dfpFirstRendered", {"nonInteraction": true});
            SP_GPT_First_Slot_Rendered = true;
          }
        });
      });

    })(googletag, SP_GPT_Slots);
    </script>
<script type="text/javascript" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/scripts-foot-dfb2dddf3e07e06b11282e3f2248e361.js.descarga"></script>
<script type="text/javascript" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/compiled.41a3b3fb364b15d74d49.js.descarga"></script>
<script type="text/javascript" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/wp-embed.min.js.descarga"></script>
    <script>
    jQuery(document).ready(function() {
      jQuery('.lazyYT').each(function() {
        var id = jQuery(this).data('youtube-id'),
            url = 'https://www.youtube.com/watch?v=' + id;
        jQuery(this).replaceWith('<a href="' + url + '">' + url + '</a>');
      });
    });
    </script>
  
  


<!-- Performance optimized by W3 Total Cache. Learn more: https://www.w3-edge.com/products/

Object Caching 1215/1292 objects using memcached
Page Caching using memcached (SSL caching disabled)
Content Delivery Network via Amazon Web Services: CloudFront: dab1nmslvvntp.cloudfront.net

 Served from: www.sitepoint.com @ 2017-10-16 10:20:52 by W3 Total Cache --><iframe src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/ect.html" id="db_ect" height="0" width="0" style="display: none;"></iframe><iframe id="sumome-jquery-iframe" title="Sumo Hidden Content" style="display: none;" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/saved_resource.html"></iframe><a href="javascript:void(0);" title="Sumo" style="background-color: rgb(0, 115, 183); border-radius: 3px 0px 0px 3px; box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 10px; position: fixed; z-index: 2147483647; padding: 0px; width: 44px; height: 40px; text-indent: -10000px; opacity: 1; display: none !important;"><span style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;">Sumo</span><span style="display:block;width:40px;height:40px;background:white;margin-left:4px;-webkit-border-radius: 3px 0 0 3px;-moz-border-radius: 3px 0 0 3px;-ms-border-radius: 3px 0 0 3px;-o-border-radius: 3px 0 0 3px;border-radius: 3px 0 0 3px;background-repeat:no-repeat;background-position:8px 8px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZDQ2MjI4YS03NWY2LTRkZTQtOGJjYy1hODc1NjRkMjYxYTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3MUVFMDFFMjVDMTFFNjlFQjhBRjdGODU5MDJBMDUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3MUVFMDBFMjVDMTFFNjlFQjhBRjdGODU5MDJBMDUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxZDQ2MjI4YS03NWY2LTRkZTQtOGJjYy1hODc1NjRkMjYxYTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MWQ0NjIyOGEtNzVmNi00ZGU0LThiY2MtYTg3NTY0ZDI2MWE1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8JtvywAAAKhQTFRFzOPxSJvLA3W4Mo7FBna5w97u8vj7EHy8a67VhbzdsdTpVaLPh73d9/v9C3m6QZfJbq/WXKbR3u32JIfB3ez1KorDir/eBHW4+/3+rtPoZarUG4K/LIvDDnu7ocvkf7nbdrTY9fr8E328WKPQO5PITJ3MPpXJstXptdbq+Pv9cbHXaq3VU6HOkMLgnMnjDHq62uv1/P3+6/T53Oz1cLDX/f7+AHO3////ptOZ5QAAADh0Uk5T/////////////////////////////////////////////////////////////////////////wA7XBHKAAAAmUlEQVR42sSRRxLCMAxFRSq9907ovebr/jdDMWYGxmZL3sIqbyFbJv4B/VlkVlerKALTD3G46Mx3AOR1UZ/TsDxW6W0gfYRNVfTCFu2AWpAMgMItMW+zQJU2UjWI29D0+e5KWNPMk+A9Om+B/UgOJyCuwMJCrpuziYkIsglfRByZ/XM3eXnBFEu1kpMpjq9dxQYp/OAXTwEGAB7Rc1xVnPemAAAAAElFTkSuQmCC);"></span></a><iframe style="display: none;" src="./Create a Chat App with Rails 5, ActionCable, and Devise — SitePoint_files/saved_resource(1).html"></iframe></body></html>